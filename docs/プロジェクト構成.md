# RA FB システム プロジェクト構成

> 全体像・機能一覧・ディレクトリ構成

---

## 1. 機能一覧

| 機能 | 説明 | 経路 |
|------|------|------|
| RA FB 生成 | 初回架電の文字起こしからFB生成 | Slack /rafb、ファイルアップロード、CLI、Webhook |
| CA FB 生成 | 法人面談の文字起こしからFB生成 | Slack /fb、CLI、Webhook |
| 法人マスタ自動格納 | FB生成時に法人情報を抽出・保存（事業リサーチ含む） | 全経路で自動（--no-company で無効化） |
| 法人比較 | 都道府県×セグメントで法人を比較 | compare_companies.py |
| 過去データ一括取り込み | 既存文字起こしから法人マスタ生成（事業リサーチ付き） | bulk_import_company.py |
| プレイブック更新 | 法人マスタからマーケット成長性・事業戦略を抽出し、アトラクトプレイブックに追記 | update_playbook.py |
| 法人マスタ補完 | 不足項目（企業スナップショット等）をWeb検索で補完 | supplement_company_research.py |
| 法人マスタ移行 | 既存法人マスタを新構造（企業情報統合等）に移行 | migrate_company_master.py |

---

## 2. ディレクトリ構成

```
RA_FBシステム/
├── ra_fb/                      # コアパッケージ
│   ├── config.py               # 設定・環境変数・パス定数
│   ├── utils.py                # RA名・会社名抽出
│   ├── feedback.py             # RA/CA FB 生成ロジック
│   ├── slack.py                # Slack 投稿
│   └── company.py              # 法人情報抽出・事業リサーチ・比較
├── scripts/
│   ├── slack_server.py         # メイン起動（/rafb, /fb, ファイルアップロード）
│   ├── webhook_server.py       # Notta × Zapier
│   ├── cli.py                  # RA/CA FB 生成 CLI
│   ├── compare_companies.py    # 都道府県×セグメントで法人比較
│   ├── bulk_import_company.py  # 過去文字起こしから法人マスタ一括生成
│   ├── update_playbook.py      # 法人マスタ→プレイブック「法人別事例」更新
│   ├── supplement_company_research.py  # 法人マスタの不足項目をWeb検索で補完
│   ├── migrate_company_master.py       # 法人マスタを新構造に移行
│   ├── generate_feedback.py    # 後方互換（cli ra）
│   └── slack_app_server.py     # 後方互換（slack_server）
├── data/
│   ├── input/                  # 入力データ
│   │   ├── ra/                 # 初回架電（RA）文字起こし
│   │   └── ca/                 # 法人面談（CA）議事録
│   └── output/
│       └── 法人マスタ/          # 法人情報（出力・都道府県×セグメントで比較）
├── references/
│   ├── manual/                 # 架電マニュアル・PSS・チェックリスト・事前商談前リサーチ
│   └── candidate_attract/      # 候補者アトラクト（プレイブック・マーケットセグメント）
├── docs/                       # 設定ガイド・起動ガイド・問題レポート
├── pyproject.toml
└── requirements.txt
```

---

## 3. パス定数（config.py）

| 定数 | パス |
|------|------|
| ROOT | プロジェクトルート |
| DATA_DIR | data/ |
| INPUT_DIR | data/input/ |
| OUTPUT_DIR | data/output/ |
| REF_DIR | references/ |
| MASTER_DIR | data/output/法人マスタ/ |
| LONG_CALLS_DIR | data/input/ra/ |
| CA_DIR | data/input/ca/ |
| MANUAL_DIR | references/manual/ |
| CANDIDATE_ATTRACT_DIR | references/candidate_attract/ |

---

## 4. 法人マスタ項目（24項目）

基本20項目 + 事業リサーチ4項目（Web検索で補足）

| # | 項目 |
|---|------|
| 1-20 | 必要資格、必要経験、仕事内容、会社の事業内容、マーケットの成長度合い、都道府県、未経験OK、年齢、出張、福利厚生、残業時間、採用人数、手数料、面接の方式、面接回数、面接で見ているポイント、過去落とした人、受かった人、評価、キャリアアップ制度 |
| 21 | 事業一覧・主軸事業 |
| 22 | 売上構成比 |
| 23 | 今後の注力領域 |
| 24 | マーケットの成長性・競合 |

---

## 5. 起動コマンド

| 用途 | コマンド |
|------|----------|
| Slack サーバー | `python scripts/slack_server.py` |
| Notta Webhook | `python scripts/webhook_server.py` |
| RA FB 生成 | `python scripts/cli.py ra <ファイル>` |
| CA FB 生成 | `python scripts/cli.py ca <ファイル>` |
| 法人比較 | `python scripts/compare_companies.py 愛知 電気系` |
| 法人マスタ一括生成 | `python scripts/bulk_import_company.py` |
| プレイブック更新 | `python scripts/update_playbook.py` |
| 法人マスタ補完 | `python scripts/supplement_company_research.py` |
| 法人マスタ移行 | `python scripts/migrate_company_master.py` |

---

## 6. 関連ドキュメント

| 種別 | ドキュメント |
|------|--------------|
| 全体 | [README](README.md) … ドキュメント一覧 |
| 起動 | [起動ガイド](起動ガイド.md) |
| Slack | [テキストファイルアップロード](Slack_テキストファイルアップロード設定.md)、[個別連携](Slack_個別連携設定.md)、[/rafb・/fb コマンド](Slack_rafb_fb_コマンド設定.md) |
| 連携 | [Notta × Zapier](Notta_Zapier_連携設定.md) |
| 問題 | [問題点・改善レポート](問題点・改善レポート.md) |
| 法人マスタ | [README](../data/output/法人マスタ/README.md)、[マスタ項目一覧](../data/output/法人マスタ/マスタ項目一覧.md) |
