# メンバー向けセットアップガイド

他のメンバーがターミナルから RA_FB システムを使えるようにする手順です。

---

## 前提

- macOS または Linux（Python 3.9 以上）
- プロジェクトフォルダを取得済み（Git で clone または共有フォルダからコピー）

---

## 1. プロジェクトの取得

### Git で共有している場合

```bash
git clone <リポジトリURL> RA_FBシステム
cd RA_FBシステム
```

### 共有フォルダ・ZIP で受け取った場合

```bash
cd /path/to/RA_FBシステム   # 解凍したフォルダに移動
```

---

## 2. 初回セットアップ（1回だけ）

```bash
# プロジェクトフォルダに移動
cd RA_FBシステム

# セットアップ実行（venv 作成 + 依存関係インストール）
./setup.sh

# 仮想環境を有効化
source venv/bin/activate

# .env を作成（.env.example をコピー）
cp .env.example .env

# .env を編集してトークンを設定（下記参照）
```

---

## 3. 環境変数（.env）の設定

`.env` を開き、以下の値を設定します。

| 変数 | 必須 | 取得方法 |
|------|------|----------|
| `SLACK_WEBHOOK_URL` | ○ | 管理者に共有してもらう、または Slack > #dk_ra_初回架電fb > チャンネル設定 > 連携 > Incoming Webhook |
| `SLACK_BOT_TOKEN` | Slack App 利用時 | 管理者に共有してもらう |
| `SLACK_APP_TOKEN` | Slack App 利用時 | 管理者に共有してもらう |
| `ANTHROPIC_API_KEY` | AI 利用時 | 管理者に共有してもらう、または [console.anthropic.com](https://console.anthropic.com/) で各自取得 |

**※ トークンは .env にのみ保存し、Git にコミットしないでください。**

---

## 4. 使い方

### 毎回ターミナルを開いたとき

```bash
cd RA_FBシステム
source venv/bin/activate
```

### フィードバック生成（Slack に投稿）

```bash
python scripts/generate_feedback.py references/long_calls/茂野/TOKAI_EC_茂野_016.md
```

### フィードバック生成（Slack に送らず標準出力のみ）

```bash
python scripts/generate_feedback.py references/long_calls/茂野/TOKAI_EC_茂野_016.md --no-slack
```

### Slack で /rafb を使う場合

```bash
python scripts/slack_app_server.py
```

起動したままにしておくと、Slack で `/rafb` コマンドが使えます。

---

## 5. 管理者がやること（プロジェクト共有時）

1. **Git リポジトリを作成**してプロジェクトを push（.env は .gitignore に含める）
2. **.env の値を安全に共有**（Slack DM、1Password、社内 Wiki など）
3. **メンバーにこのガイドのリンクを渡す**

---

## トラブルシューティング

| 現象 | 対処 |
|------|------|
| `./setup.sh: Permission denied` | `chmod +x setup.sh` を実行 |
| `python3: command not found` | Python 3 をインストール（macOS: `brew install python3`） |
| `ModuleNotFoundError` | `source venv/bin/activate` を忘れていないか確認 |
| Slack 投稿が失敗する | .env の SLACK_WEBHOOK_URL を確認 |
